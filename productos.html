<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OnlyPan — Todos los productos</title>
  <meta name="description" content="Catálogo de panes artesanales de OnlyPan." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fff7ef;--paper:#fffdfa;--text:#2b2b2b;--muted:#7a6d64;
      --brand:#d4a373;--brand-700:#8c5e3c;--stroke:#00000012;--radius:16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}

    /* Header (igual al index) */
    .nav{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.1) blur(10px);
      background:linear-gradient(180deg,#fffaf2dd,#fffaf2aa);border-bottom:1px solid var(--stroke)}
    .nav-inner{max-width:1100px;margin:0 auto;padding:12px 18px;display:grid;grid-template-columns:auto 1fr;gap:14px;align-items:center}
    .brand{display:flex;align-items:center;gap:10px}
    .mark{width:38px;height:38px;border-radius:12px;background:#fff url('assets/logo-onlypan.png') center/80% no-repeat;border:1px solid var(--stroke)}
    .name{font-family:"Playfair Display",serif;font-weight:700;font-size:1.25rem}

    .tabs{justify-self:center;display:flex;gap:10px;flex-wrap:wrap}
    .pill{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:999px;background:#fff;border:1px solid var(--stroke);font-weight:700;min-width:128px;box-shadow:0 6px 14px #0000000a}
    .pill.primary{background:var(--brand);color:#fff;border-color:#0000}

    /* Page */
    .wrap{max-width:1100px;margin:0 auto;padding:26px 18px}
    h1{font-family:"Playfair Display",serif;font-size:clamp(28px,5.2vw,40px);margin:0 0 8px}
    .muted{color:var(--muted)}
    .search{margin-top:12px}
    .search input{width:100%;padding:14px 14px;border-radius:12px;border:1px solid var(--stroke);background:#fff}

    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px;margin-top:18px}
    .card{background:var(--paper);border:1px solid var(--stroke);border-radius:16px;overflow:hidden;box-shadow:0 10px 28px #00000010}
    .card .img{height:170px;background:#efe5d9}
    .card img{display:block;width:100%;height:100%;object-fit:cover}
    .card .body{padding:12px}
    .card h3{margin:0 0 6px;font-size:1.06rem}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{font-size:.82rem;background:#fff;border:1px dashed #00000022;border-radius:999px;padding:6px 10px}
    .card .price{margin-top:10px;font-weight:800}

    /* Empty */
    .empty{margin-top:18px;padding:22px;border:1px dashed #00000018;border-radius:14px;color:var(--muted);text-align:center;background:#fffaf5}

    /* Modal (detalle) */
    .modal{position:fixed;inset:0;background:#00000060;display:none;place-items:center;padding:16px;z-index:60}
    .modal.show{display:grid}
    .sheet{max-width:680px;width:100%;background:var(--paper);border-radius:18px;border:1px solid var(--stroke);overflow:hidden;box-shadow:0 30px 60px #00000030}
    .sheet .media{height:300px;background:#efe5d9}
    .sheet img{width:100%;height:100%;object-fit:cover}
    .sheet .content{padding:16px}
    .sheet h2{margin:0 0 8px;font-family:"Playfair Display",serif}
    .sheet .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .close{position:absolute;top:16px;right:16px;background:#fff;border:1px solid var(--stroke);border-radius:999px;padding:8px 12px;font-weight:700}

    /* Footer */
    footer{border-top:1px solid var(--stroke);background:linear-gradient(180deg,#fffaf2,#fff7ef)}
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="nav">
    <div class="nav-inner">
      <a class="brand" href="index.html">
        <span class="mark" aria-hidden="true"></span>
        <span class="name">OnlyPan Store</span>
      </a>

      <div class="tabs">
        <a class="pill" href="index.html">Inicio</a>
        <a class="pill" href="index.html#nosotros">Nosotros</a>
        <a class="pill primary" href="productos.html">Productos</a>
        <a class="pill" href="index.html#informacion">Información</a>
      </div>
    </div>
  </nav>

  <main class="wrap">
    <h1>Todos los productos</h1>
    <p class="muted">Catálogo completo. Tocá cualquier producto para ver la ficha.</p>

    <div class="search">
      <input id="q" type="search" placeholder="Buscar productos, descripciones o tags…">
    </div>

    <div id="grid" class="grid"></div>
    <div id="empty" class="empty" style="display:none">Sin resultados.</div>
  </main>

  <!-- Modal detalle -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="sheet">
      <button class="close" id="close">Cerrar</button>
      <div class="media"><img id="mimg" alt=""></div>
      <div class="content">
        <h2 id="mtitle"></h2>
        <div class="muted" id="mdesc"></div>
        <div class="row" id="mtags" style="margin-top:12px"></div>
        <div class="price" id="mprice" style="margin-top:12px;font-weight:800"></div>
      </div>
    </div>
  </div>

  <footer>
    <section class="wrap" style="padding-top:0;padding-bottom:18px">
      <small class="muted">© <span id="y"></span> OnlyPan Store — onlypan.store</small>
    </section>
  </footer>

  <script>
    // Año
    document.getElementById('y').textContent = new Date().getFullYear();

    // Datos de ejemplo (podés borrarlos y reemplazar por tu fetch a Supabase)
    const DATA = [
      {
        id:'p1',
        titulo:'Baguette clásica',
        img:'https://images.unsplash.com/photo-1549931296-3c132f3fc650?q=80&w=1200&auto=format&fit=crop',
        desc:'Corte crujiente y miga aireada. Ideal para sándwiches.',
        tags:['Trigo','Crusty'],
        precio: 'AR$ 2.200'
      },
      {
        id:'p2',
        titulo:'Pan de campo',
        img:'https://images.unsplash.com/photo-1547592166-23ac45744acd?q=80&w=1200&auto=format&fit=crop',
        desc:'Masa madre, fermentación lenta, sabor profundo.',
        tags:['Masa madre','Fermentación'],
        precio: 'AR$ 2.900'
      },
      {
        id:'p3',
        titulo:'Pan integral',
        img:'https://images.unsplash.com/photo-1617195737496-89ae090afcca?q=80&w=1200&auto=format&fit=crop',
        desc:'Harinas integrales y semillas.',
        tags:['Semillas','Fibra'],
        precio: 'AR$ 3.200'
      }
    ];

    const $grid = document.getElementById('grid');
    const $empty = document.getElementById('empty');
    const $q = document.getElementById('q');

    function card(p){
      const el = document.createElement('article');
      el.className = 'card';
      el.innerHTML = `
        <div class="img"><img src="${p.img}" alt="${p.titulo}"></div>
        <div class="body">
          <h3>${p.titulo}</h3>
          <div class="chips">${(p.tags||[]).map(t=>`<span class="chip">${t}</span>`).join('')}</div>
          <div class="price">${p.precio? p.precio : ''}</div>
        </div>
      `;
      el.addEventListener('click', ()=>openModal(p));
      return el;
    }

    function render(list){
      $grid.innerHTML = '';
      if(!list.length){ $empty.style.display='block'; return }
      $empty.style.display='none';
      list.forEach(p=>$grid.appendChild(card(p)));
    }

    // Búsqueda simple
    let all = DATA.slice();
    $q.addEventListener('input', ()=>{
      const t = $q.value.toLowerCase().trim();
      const res = all.filter(p =>
        p.titulo.toLowerCase().includes(t) ||
        (p.desc||'').toLowerCase().includes(t) ||
        (p.tags||[]).some(tag=>tag.toLowerCase().includes(t))
      );
      render(res);
    });

    render(all);

    // Modal
    const $modal = document.getElementById('modal');
    const $close = document.getElementById('close');
    const $mt = document.getElementById('mtitle');
    const $md = document.getElementById('mdesc');
    const $mi = document.getElementById('mimg');
    const $mp = document.getElementById('mprice');
    const $tg = document.getElementById('mtags');

    function openModal(p){
      $mt.textContent = p.titulo || '';
      $md.textContent = p.desc || '';
      $mi.src = p.img || '';
      $mi.alt = p.titulo || '';
      $mp.textContent = p.precio || '';
      $tg.innerHTML = (p.tags||[]).map(t=>`<span class="chip">${t}</span>`).join('');
      $modal.classList.add('show');
      $modal.setAttribute('aria-hidden','false');
    }
    function closeModal(){
      $modal.classList.remove('show');
      $modal.setAttribute('aria-hidden','true');
    }
    $close.addEventListener('click', closeModal);
    $modal.addEventListener('click', (e)=>{ if(e.target===$modal) closeModal(); });

    /* —— Si más adelante conectás Supabase —— 
       1) Obtené los productos con fetch o el SDK y llená "all".
       2) Llamá a render(all).
       Mantuvimos todo sin exponer claves en el front para mayor seguridad.
    */
  </script>
</body>
</html>
